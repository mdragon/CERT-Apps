<!DOCTYPE html>
<html lang="en">
<head>
	<title>CERT Apps</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

	<style type="text/css">
		.nav
		{
			background-color: #efefef;
			width: 100%;
			margin: auto;
			text-align: right;
			padding: 3px;
		}

		.app
		{
		}

		.odd
		{
			background: #efefef;
		}

		.panel-heading
		{
			padding: 3px 15px  !important;
		}

		.panel-heading h4
		{
			margin-top: 5px !important;
			margin-bottom: 5px !important;
		}

		body
		{
			margin-left: 5px;
		}

		label
		{
			font-weight: 300 !important;
		}

		.center-content
		{
			margin: 0 auto;
		}

		.member-contact-form
		{
		}

	    @media (min-width: 575px) 
	    {
      		.center-content
      		{
        		width: 550px;
      		}
    	}

    	td.mapped
    	{
    		/* border: 1px solid green !important; */
    		background-color: lightyellow !important;
    	}

    	table.importMap td
    	{
    		border: 1px solid #efefef;
    	}

    	td.toggle-up-down
    	{
    		white-space: nowrap;
    	}

    	td.toggle-up-down i:hover
    	{
    		cursor: pointer;
    	}
	</style>
</head>
<body>

</body>
</html>

<script type="text/javascript" src="../js/jquery-1.11.x.js"></script>
<script type="text/javascript" src="../js/handlebars-v1.3.x.js"></script>
<script type="text/javascript" src="../js/ember-1.5.x.js"></script>
<script type="text/javascript" src="../js/cert-apps.js"></script>

<script type="text/x-handlebars">
	<div class="nav">
		{{log "nav content"}}
		{{log content}}

		{{#if content.LoggedIn }}
			{{#if content.Member.CanLookup }}
				{{#link-to 'teamID.events' content.Team}}Events{{/link-to}} - {{#link-to 'event.create' content.Team}}Create {{/link-to}} | 
				Team {{#link-to 'roster.index' content.Team}}Roster {{/link-to}} | 
			{{/if}}
			{{#link-to 'member.update'}}My Info{{/link-to}} | 

			{{#if content.Member.FirstName }}
				Welcome, {{content.Member.FirstName}}
			{{/if}}
		{{/if}}
		<a {{bind-attr href="content.LogInOutLink"}}>{{content.LogInOutText}}</a>
	</div>
	<div class="app">
		{{outlet}}
	</div>
	<div class="foot">
		Copyright Matt Dragon 2013-{{content.year}}
	</div>
</script>

<script type="text/x-handlebars" data-template-name="index">
	Test
	{{outlet}}
</script>

<script type="text/x-handlebars" data-template-name="team">
	<div style="width: 80%; margin: 0 auto;">
		{{outlet}}
	</div>
</script>

<script type="text/x-handlebars" data-template-name="roster/index">
	<h3>{{content.Team.Name}} Roster</h3>
	<table class="table table-responsive table-striped table-condensed table-bordered",>
		<thead>
			{{#if content.loggedInMember.CanLookup }}
				<th>Radio</th>
			{{/if}}
			<th>Name</th>
			<th>Cell</th>
			<th>Email</th>
			{{#if content.loggedInMember.CanLookup }}
				<th>Address</th>
			{{/if}}

		</thead>
		<tbody>
			{{#each mem in content.Members }}
				{{#if mem }}
				<tr class="">
					{{#if content.loggedInMember.CanLookup}}
						<td>{{mem.RadioID}}</td>
					{{/if}}
					
					<td>{{mem.FirstName}} {{mem.LastName}}</td>
					<td>
						{{#if mem.cellDisplay}}
							{{mem.Cell}}
						{{/if}}
					</td>
					<td>
						{{#if mem.emailDisplay}}
							{{mem.Email}}
						{{/if}}
					</td>
					{{#if content.loggedInMember.CanLookup}}
						<td>{{mem.Line1}}{{mem.line2Display}}</td>
					{{/if}}
				</tr>
				{{/if}}
			{{/each}}
		</tbody>
	</table>
</script>

<script type="text/x-handlebars" data-template-name="roster/import">
	<h3>Import Member Data for {{content.Team.Name}}</h3>

	{{textarea cols=180 rows=15 value=content.RawPasteDataForImport}}
	<br/>
	<button {{action parseInput content}}><i class="fa fa-save"></i> Parse</button>

	{{#if content.importCols}}
	<table class="table table-striped table-condensed table-bordered importMapping">
		<thead>
			<tr>
			<th></th>
			<th></th>
			{{#each col in content.importCols }}
				<th {{bind-attr class=":import-column col.name" }}>
					{{view CERTApps.ImportColumnSelect
						content=content.memberFields
						prompt="Map to..."
						class="import-column"
						}}
				</th>
			{{/each}}
			</tr>
		</thead>
		<tbody>
			{{#each row in content.ParsedColumnsForImport}}
				<tr>
					<td class="toggle-up-down">
						<i {{ action toggleDown row content.ParsedColumnsForImport }} class="fa fa-level-down" title="Toggle from here down"></i>
						<i {{ action toggleUp row content.ParsedColumnsForImport }} class="fa fa-level-up" title="Toggle from here up"></i>
					</td>
					<td>{{input type="checkbox" checked=row.selected}}</td>
					{{#each col in row.cols}}
						<td {{bind-attr class=":import-column col.name"}}>{{col.value}}</td>
					{{/each}}
				</tr>
			{{/each}}
		</tbody>
	</table>

	<button {{action save content}}><i class="fa fa-save"></i> Save</button>

	{{/if}}
</script>

<script type="text/x-handlebars" data-template-name="member">
	<div class="center-content">
		<h3>Member</h3>
		{{outlet}}
	</div>
</script>

<script type="text/x-handlebars" data-template-name="member/update">
	Update your contact information:
	<form>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4><i class="fa fa-user"></i> Member</h4>
			</div>
			<div class="panel-body">
				{{input name="FirstName" placeholder="First Name" value=content.FirstName}}
				{{input name="LastName" placeholder="Last Name" value=content.LastName}}
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4><i class="fa fa-envelope"></i> Email</h4>
			</div>
			<div class="panel-body">
				{{input name="Email" placeholder="Email Address" value=content.Email size='30'}} <br/>
				<label>{{input type='checkbox' name="ShowEmail" checked=content.ShowEmail placeholder='Show'}} Show to other Members</label><br/>
				{{input name="Email2" placeholder="Secondary Email Address" value=content.Email2 size='30'}} 
			</div>
		</div>
			
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4><i class="fa fa-phone"></i> Phone Numbers</h4>
			</div>
			<div class="panel-body">
				{{input name="Cell" placeholder="Cell Phone" value=content.Cell}} <br/>
				<label>{{input type='checkbox' name="ShowCell" checked=content.ShowCell placeholder='Show'}} Show Cell Phone to other Members</label><br/>
				<label>{{input type='checkbox' name="OkToText" checked=content.OKToText}} OK to text?</label><br/>

				{{input name="HomePhone" placeholder="Home Phone" value=content.HomePhone}} 
			</div>
		</div>
		
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4><i class="fa fa-home"></i> Home Address</h4>
			</div>
			<div class="panel-body">
				{{input name="Line1" placeholder="Address" value=content.Line1 size='50'}}<br/>
				{{input name="Line2" placeholder="Address Line 2" value=content.Line2 size='50'}}<br/>
				{{input name="City" placeholder="City" value=content.City size='30'}}, 
				{{input name="State" placeholder="State" value=content.State size='3'}}
				{{input name="Zip" placeholder="Zip" value=content.Zip size='7'}}
			</div>
		</div>

		<button {{action saveContact content}}><i class="fa fa-save"></i> Save</button>
	</form>
</script>

<script type="text/x-handlebars" data-template-name="teamID/events">
	<div class="center-content">
		<h4>Upcoming Events</h4>
		{{#each e in upcoming}}
			{{#if e.Summary }}
				{{e.Summary}}
			{{else}}
				Un-named
			{{/if}}
			{{e.EventStart}}
			<br/>
		{{else}}
			No upcoming events
		{{/each}}

		<h4>Recent Events</h4>
		{{#each e in recent}}
			{{e.Summary}} 
		{{else}}
			No recent events
		{{/each}}
	</div>
</script>

<script type="text/x-handlebars" data-template-name="event">
	<div class="center-content">
		{{outlet}}
	</div>
</script>

<script type="text/x-handlebars" data-template-name="event/update">
	<h3>Event Details</h3>
	<form>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4><i class="fa fa-info"></i> Information</h4>
			</div>
			<div class="panel-body">
				{{view Ember.Select content=content.possibleEventTypes value=content.Event.eventType prompt="Select Deployment Type"}}
				{{input name="Summary" placeholder="Summary" value=content.Event.Summary size=70}}
				{{textarea cols=68 rows=7 value=content.Event.Description placeholder="Description"}}
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h4><i class="fa fa-globe"></i> Location</h4>
			</div>
			<div class="panel-body">
				<label>
					<b>Event:</b>  <br/>
					{{input name="Line1" placeholder="1 Main St, 12345" value=content.Event.DeploymentAddress size=75}}<br/>
				</label>

				<label>
					<b>Parking:</b> </br>

					<div class="parking-location" style="" >
						{{input name="Line1" placeholder="1 Main St, 12345" value=content.Event.ParkingAddress size=75}}<br/>
					</div>
				</label>
			</div>
		</div>
			
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4><i class="fa fa-calendar"></i> Dates/Times</h4>
			</div>
			<div class="panel-body">
				<b>Start:</b>
				<label>Date: {{input name="" placeholder="01/31/14" value=content.Event.eventStartDate}}</label>
				<label>Time: {{input name="" placeholder = "0000" value=content.Event.eventStartTime size=10}} </label><br/>
				<b>End:&nbsp;</b>
				<label>Date: {{input name="" placeholder="(if different)" value=content.Event.eventFinishDate}}</label>
				<label>Time: {{input name="" value=content.Event.eventFinishTime size=10}} </label>

				<label>Meet Time: {{input  name="" value=content.Event.arriveTime size=10}}(if different than start)</label><br/>				
			</div>
		</div>
		
		<div class="panel panel-default">
			<div class="panel-heading">
				<h4><i class="fa fa-external-link"></i> Links</h4>
			</div>
			<div class="panel-body">
				<label>IAP Link: {{input name="IAP" placeholder="" value=content.Event.IAPLink size=75}}<br/>
				<label>Roster Link: {{input name="Roster" placeholder="" value=content.Event.RosterLink size=75}}<br/>
			</div>
		</div>

		<button {{action saveEvent content}}><i class="fa fa-save"></i> Save</button>
	</form>
</script>

<script type="text/x-handlebars" data-template-name="landing">
Landing
</script>

<script type="text/x-handlebars" data-template-name="landing/index">
Landing index
</script>

<script type="text/x-handlebars" data-template-name="loading">
Loading...
</script>
